{"version":3,"file":"ContextualMenuAnchor.js","sourceRoot":"../src/","sources":["components/ContextualMenu/ContextualMenuItemWrapper/ContextualMenuAnchor.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  anchorProperties,\n  getNativeProps,\n  memoizeFunction,\n  getId,\n  mergeAriaAttributeValues,\n  IComponentAs,\n  composeComponentAs,\n} from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { isItemDisabled, hasSubmenu } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\nimport type { IKeytipDataProps } from '../../../KeytipData';\nimport type { IKeytipProps } from '../../../Keytip';\nimport { IContextualMenuItemProps } from '../ContextualMenuItem.types';\n\nexport class ContextualMenuAnchor extends ContextualMenuItemWrapper {\n  private _anchor = React.createRef<HTMLAnchorElement>();\n  private _ariaDescriptionId: string;\n\n  private _getMemoizedMenuButtonKeytipProps = memoizeFunction((keytipProps: IKeytipProps) => {\n    return {\n      ...keytipProps,\n      hasMenu: true,\n    };\n  });\n\n  public render() {\n    const {\n      item,\n      classNames,\n      index,\n      focusableElementIndex,\n      totalItemCount,\n      hasCheckmarks,\n      hasIcons,\n      expandedMenuItemKey,\n      onItemClick,\n      openSubMenu,\n      dismissSubMenu,\n      dismissMenu,\n    } = this.props;\n\n    let ChildrenRenderer: IComponentAs<IContextualMenuItemProps> = ContextualMenuItem;\n\n    if (this.props.item.contextualMenuItemAs) {\n      ChildrenRenderer = composeComponentAs(this.props.item.contextualMenuItemAs, ChildrenRenderer);\n    }\n\n    if (this.props.contextualMenuItemAs) {\n      ChildrenRenderer = composeComponentAs(this.props.contextualMenuItemAs, ChildrenRenderer);\n    }\n\n    let anchorRel = item.rel;\n    if (item.target && item.target.toLowerCase() === '_blank') {\n      anchorRel = anchorRel ? anchorRel : 'nofollow noopener noreferrer'; // Safe default to prevent tabjacking\n    }\n\n    const itemHasSubmenu = hasSubmenu(item);\n    const nativeProps = getNativeProps<React.HTMLAttributes<HTMLAnchorElement>>(item, anchorProperties);\n    const disabled = isItemDisabled(item);\n    const { itemProps, ariaDescription } = item;\n\n    let { keytipProps } = item;\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n    }\n\n    // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n    // the description in it to be added to ariaDescribedBy\n    if (ariaDescription) {\n      this._ariaDescriptionId = getId();\n    }\n    const ariaDescribedByIds = mergeAriaAttributeValues(\n      item.ariaDescribedBy,\n      ariaDescription ? this._ariaDescriptionId : undefined,\n      nativeProps['aria-describedby'],\n    );\n\n    const additionalItemProperties = {\n      'aria-describedby': ariaDescribedByIds,\n    };\n\n    return (\n      <div>\n        <KeytipData keytipProps={item.keytipProps} ariaDescribedBy={ariaDescribedByIds} disabled={disabled}>\n          {(keytipAttributes: IKeytipDataProps): JSX.Element => (\n            <a\n              {...additionalItemProperties}\n              {...nativeProps}\n              {...keytipAttributes}\n              ref={this._anchor}\n              href={item.href}\n              target={item.target}\n              rel={anchorRel}\n              className={classNames.root}\n              role=\"menuitem\"\n              aria-haspopup={itemHasSubmenu || undefined}\n              aria-expanded={itemHasSubmenu ? item.key === expandedMenuItemKey : undefined}\n              aria-posinset={focusableElementIndex + 1}\n              aria-setsize={totalItemCount}\n              aria-disabled={isItemDisabled(item)}\n              // eslint-disable-next-line deprecation/deprecation\n              style={item.style}\n              onClick={this._onItemClick}\n              onMouseEnter={this._onItemMouseEnter}\n              onMouseLeave={this._onItemMouseLeave}\n              onMouseMove={this._onItemMouseMove}\n              onKeyDown={itemHasSubmenu ? this._onItemKeyDown : undefined}\n            >\n              <ChildrenRenderer\n                componentRef={item.componentRef}\n                item={item}\n                classNames={classNames}\n                index={index}\n                onCheckmarkClick={hasCheckmarks && onItemClick ? onItemClick : undefined}\n                hasIcons={hasIcons}\n                openSubMenu={openSubMenu}\n                dismissSubMenu={dismissSubMenu}\n                dismissMenu={dismissMenu}\n                getSubmenuTarget={this._getSubmenuTarget}\n                {...itemProps}\n              />\n              {this._renderAriaDescription(ariaDescription, classNames.screenReaderText)}\n            </a>\n          )}\n        </KeytipData>\n      </div>\n    );\n  }\n\n  protected _getSubmenuTarget = (): HTMLElement | undefined => {\n    return this._anchor.current ? this._anchor.current : undefined;\n  };\n\n  protected _onItemClick = (ev: React.MouseEvent<HTMLElement>): void => {\n    const { item, onItemClick } = this.props;\n    if (onItemClick) {\n      onItemClick(item, ev);\n    }\n  };\n\n  protected _renderAriaDescription = (ariaDescription?: string, className?: string) => {\n    // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n    return ariaDescription ? (\n      <span id={this._ariaDescriptionId} className={className}>\n        {ariaDescription}\n      </span>\n    ) : null;\n  };\n}\n"]}