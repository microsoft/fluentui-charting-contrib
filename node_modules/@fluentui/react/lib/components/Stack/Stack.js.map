{"version":3,"file":"Stack.js","sourceRoot":"../src/","sources":["components/Stack/Stack.tsx"],"names":[],"mappings":"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","sourcesContent":["/** @jsxRuntime classic */\n/** @jsx withSlots */\nimport * as React from 'react';\nimport { withSlots, createComponent, getSlots } from '@fluentui/foundation-legacy';\nimport { css, getNativeProps, htmlElementProperties, warnDeprecations } from '../../Utilities';\nimport { styles, GlobalClassNames as StackGlobalClassNames } from './Stack.styles';\nimport { StackItem } from './StackItem/StackItem';\nimport type { IStackComponent, IStackProps, IStackSlots } from './Stack.types';\nimport type { IStackItemProps } from './StackItem/StackItem.types';\n\nconst StackView: IStackComponent['view'] = props => {\n  const {\n    as: RootType = 'div',\n    disableShrink = false,\n    // eslint-disable-next-line deprecation/deprecation\n    doNotRenderFalsyValues = false,\n    enableScopedSelectors = false,\n    wrap,\n    ...rest\n  } = props;\n\n  warnDeprecations('Stack', props, {\n    gap: 'tokens.childrenGap',\n    maxHeight: 'tokens.maxHeight',\n    maxWidth: 'tokens.maxWidth',\n    padding: 'tokens.padding',\n  });\n\n  const stackChildren = _processStackChildren(props.children, {\n    disableShrink,\n    enableScopedSelectors,\n    doNotRenderFalsyValues,\n  });\n\n  const nativeProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(rest, htmlElementProperties);\n\n  const Slots = getSlots<IStackProps, IStackSlots>(props, {\n    root: RootType,\n    inner: 'div',\n  });\n\n  if (wrap) {\n    return (\n      <Slots.root {...nativeProps}>\n        <Slots.inner>{stackChildren}</Slots.inner>\n      </Slots.root>\n    );\n  }\n\n  return <Slots.root {...nativeProps}>{stackChildren}</Slots.root>;\n};\n\nfunction _processStackChildren(\n  children: React.ReactNode,\n  {\n    disableShrink,\n    enableScopedSelectors,\n    doNotRenderFalsyValues,\n  }: { disableShrink: boolean; enableScopedSelectors: boolean; doNotRenderFalsyValues: boolean },\n): (React.ReactChild | React.ReactFragment | React.ReactPortal)[] {\n  let childrenArray = React.Children.toArray(children);\n\n  childrenArray = React.Children.map(childrenArray, child => {\n    if (!child) {\n      return doNotRenderFalsyValues ? null : child;\n    }\n\n    // We need to allow children that aren't falsy values, but not valid elements since they could be\n    // a string like <Stack>{'sample string'}</Stack>\n    if (!React.isValidElement(child)) {\n      return child;\n    }\n\n    if (child.type === React.Fragment) {\n      return child.props.children\n        ? _processStackChildren(child.props.children, { disableShrink, enableScopedSelectors, doNotRenderFalsyValues })\n        : null;\n    }\n\n    const childAsReactElement = child as React.ReactElement;\n\n    let defaultItemProps: IStackItemProps = {};\n    if (_isStackItem(child)) {\n      defaultItemProps = { shrink: !disableShrink };\n    }\n    const childClassName = childAsReactElement.props.className;\n\n    return React.cloneElement(childAsReactElement, {\n      ...defaultItemProps,\n      ...childAsReactElement.props,\n      ...(childClassName && { className: childClassName }),\n      ...(enableScopedSelectors && { className: css(StackGlobalClassNames.child, childClassName) }),\n    });\n  });\n\n  return childrenArray;\n}\n\nfunction _isStackItem(item: React.ReactNode): item is typeof StackItem {\n  // In theory, we should be able to just check item.type === StackItem.\n  // However, under certain unclear circumstances (see https://github.com/microsoft/fluentui/issues/10785),\n  // the object identity is different despite the function implementation being the same.\n  return (\n    !!item &&\n    typeof item === 'object' &&\n    !!(item as React.ReactElement).type &&\n    // StackItem is generated by createComponent, so we need to check its displayName instead of name\n    ((item as React.ReactElement).type as React.ComponentType).displayName === StackItem.displayName\n  );\n}\n\nconst StackStatics = {\n  Item: StackItem,\n};\n\nexport const Stack: React.FunctionComponent<IStackProps> & {\n  Item: React.FunctionComponent<IStackItemProps>;\n} = createComponent(StackView, {\n  displayName: 'Stack',\n  styles,\n  statics: StackStatics,\n});\n\nexport default Stack;\n"]}